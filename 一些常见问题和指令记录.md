# 一些常见问题和指令记录

## 服务器内存不够查看内存+移动

df -h 查看所有硬盘的内存使用

du -sh 查看当前文件夹下面的内存使用情况

du -h --max-depth=1 查看当前文件夹所有子文件夹的内存使用

mv HLOP-SNN /media/haichao/af0987fa-e592-4d73-8a57-4056cb7bebf0/haichao/tzq

mv 源路径 目标路径

pwd查看当前路径



## hugging face下载模型

有时候会遇到网络延时问题，需要把模型下载到本地

[使用 HFD 加快 Hugging Face 模型和数据集的下载 - 知乎](https://zhuanlan.zhihu.com/p/721778923)

用hfd： ./hfd.sh **FacebookAI/xlm-roberta-base** --tool aria2c -x 4


# 查看显存进程：

fuser -v /dev/nvidia*



# 查看tfboard上的日志

cd VLN-with-CL/TD-STP/datasets/R2R/trained_models/r2r-best/
source tb_env/bin/activate进虚拟环境

tensorboard查看远程服务器上的训练结果
1.在远程服务器上打开tensorboard
tensorboard --logdir=path/to/logs --port=6007
eg: tensorboard --logdir=/root/fsas/0lzy/VLN-with-CL/TD-STP/datasets/R2R/trained_models/r2r-best/logs --port=6007
path/to/logs和训练代码里保存的位置要一致

2.在本地打开终端ssh连接远程服务器 
ssh -p 远程服务器端口 -L 16006:localhost:6007 服务器username@服务器ip
eg: ssh -p 52233 -L 16006:localhost:6007 haichao@172.18.34.42

3.在浏览器上访问 http://localhost:16006

# 指定了GPU但还是用卡0
def set_gpu(x):
  torch.cuda.set_device(int(x))
  print('using gpu:', x)

