# 一些常见问题和指令记录

## 文件访问与删除

* **linux系统**

cd 切换工作目录 cd .. 上一级  cd \ 根目录

rm 删除一个文件或者目录  rm test.txt(*一般文件*) rm  -r  dir*（删除目录）* rm  -r  * *（删除当前路径所有文件与文件夹）~~不要当笨蛋~~

touch 新建文件

mkdir [-p] dir  新建文件夹 -p可选，不存在就创建一个

mv 源路径 目标路径

* **windos系统**

echo. > XXX.py 新建文件

## 文本编辑

基本上 vi/vim 共分为三种模式，**命令模式、输入模式和底线命令模式**

* **一般流程**

vi + 文件名 进入命令模式

输入i进入输入模式

esc退出输入模式

输入：进入底线命令模式。：w保存  ：q退出vi  :wq  保存文件并退出 Vi编辑器

详情见 [Linux vi/vim | 菜鸟教程 (runoob.com)](https://www.runoob.com/linux/linux-vim.html)

## 服务器内存不够查看内存+移动

df -h 查看所有硬盘的内存使用

du -sh 查看当前文件夹下面的内存使用情况

du -h --max-depth=1 查看当前文件夹所有子文件夹的内存使用

mv HLOP-SNN /media/haichao/af0987fa-e592-4d73-8a57-4056cb7bebf0/haichao/tzq

mv 源路径 目标路径

pwd查看当前路径



## hugging face下载模型

有时候会遇到网络延时问题，需要把模型下载到本地

[使用 HFD 加快 Hugging Face 模型和数据集的下载 - 知乎](https://zhuanlan.zhihu.com/p/721778923)

用hfd： ./hfd.sh **FacebookAI/xlm-roberta-base** --tool aria2c -x 4


## 查看显存进程：

fuser -v /dev/nvidia*



## 查看tfboard上的日志

cd VLN-with-CL/TD-STP/datasets/R2R/trained_models/r2r-best/

source tb_env/bin/activate进虚拟环境

tensorboard查看远程服务器上的训练结果

1.在远程服务器上打开tensorboard

tensorboard --logdir=path/to/logs --port=6007

eg: tensorboard --logdir=/root/fsas/0lzy/VLN-with-CL/TD-STP/datasets/R2R/trained_models/r2r-best/logs --port=6007
path/to/logs和训练代码里保存的位置要一致

2.在本地打开终端ssh连接远程服务器 

ssh -p 远程服务器端口 -L 16006:localhost:6007 服务器username@服务器ip

eg: ssh -p 52233 -L 16006:localhost:6007 haichao@172.18.34.42

3.在浏览器上访问 http://localhost:16006

## github上传代码



## 指定了GPU但还是用卡0
### 单GPU：
def set_gpu(x):

  torch.cuda.set_device(int(x))

  print('using gpu:', x)
### 多GPU：
https://blog.csdn.net/kongkongqixi/article/details/100521590

